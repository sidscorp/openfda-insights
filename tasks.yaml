tasks:
- id: P1-T001
  title: Wire frontend endpoints to backend agent
  priority: P1
  status: completed
  description: Implement missing backend endpoints used by the Next.js frontend and
    align runtime config for a live Next server.
  files:
  - src/enhanced_fda_explorer/api_endpoints.py
  - src/enhanced_fda_explorer/openfda_client.py
  - frontend/next.config.js
  - frontend/lib/api.ts
  estimate: 2d
- id: P1-T002
  title: Deploy openfda-agent subdomain
  priority: P1
  status: completed
  description: Add nginx site config for openfda-agent.snambiar.com with Next.js proxy
    and API proxy; document deploy steps.
  files:
  - /etc/nginx/sites-available/openfda-agent.snambiar.com
  - /etc/nginx/sites-enabled/openfda-agent.snambiar.com
  - docs/deployment.md
  estimate: 1d
- id: P1-T003
  title: LLM env pickup and health checks
  priority: P1
  status: completed
  description: Ensure LLM configuration picks up API keys from config and environment;
    add optional LLM reachability check to health endpoint.
  files:
  - src/enhanced_fda_explorer/llm_factory.py
  - src/enhanced_fda_explorer/api_endpoints.py
  estimate: 1d
- id: P1-T004
  title: Systemd services and test setup
  priority: P1
  status: completed
  description: Install test tooling, set up systemd units for API and frontend, and
    validate health checks.
  files:
  - /etc/systemd/system/openfda-agent-api.service
  - /etc/systemd/system/openfda-agent-frontend.service
  - docs/deployment.md
  estimate: 1d
- id: P1-T005
  title: Chat UI feedback and metadata
  priority: P1
  status: completed
  description: Improve chat streaming UI with a dedicated activity panel and show
    response metadata.
  files:
  - frontend/app/page.tsx
  estimate: 1d
- id: P1-T006
  title: Streaming UX and timing diagnostics
  priority: P1
  status: completed
  description: Improve streaming status visibility, include response metadata in stream
    payloads, and capture agent timing.
  files:
  - src/enhanced_fda_explorer/api_endpoints.py
  - frontend/lib/api.ts
  - frontend/app/page.tsx
  estimate: 1d
- id: P1-T007
  title: Structured agent API responses
  priority: P1
  status: completed
  description: Add structured agent response endpoints and query-based GET for browser
    use.
  files:
  - src/enhanced_fda_explorer/api_endpoints.py
  estimate: 1d
- id: P1-T008
  title: LLM token limit enforcement
  priority: P1
  status: completed
  description: Use configured max_tokens/timeout when creating LLM clients to prevent
    oversized requests.
  files:
  - src/enhanced_fda_explorer/agent/fda_agent.py
  estimate: 1d
- id: P1-T009
  title: Render markdown in chat responses
  priority: P1
  status: completed
  description: Render agent responses with markdown formatting in the chat UI.
  files:
  - frontend/app/page.tsx
  - frontend/package.json
  estimate: 1d
- id: P1-T010
  title: Improve thinking box UX
  priority: P1
  status: completed
  description: Provide step-based progress and clearer status messaging during streaming.
  files:
  - frontend/app/page.tsx
  estimate: 1d
- id: P1-T011
  title: Switch OpenRouter model
  priority: P1
  status: completed
  description: Update the default model to xiaomi mimo v2 flash and restart backend.
  files:
  - src/enhanced_fda_explorer/llm_factory.py
  - src/enhanced_fda_explorer/config.py
  estimate: 1d
- id: P1-T012
  title: Respect AI_MODEL from config
  priority: P1
  status: completed
  description: Ensure FDAAgent uses configured AI_MODEL when no model is specified.
  files:
  - src/enhanced_fda_explorer/agent/fda_agent.py
  estimate: 1d
- id: P1-T013
  title: Move thinking panel under user message
  priority: P1
  status: completed
  description: Render the streaming status panel inline beneath the active user message
    and hide it on completion.
  files:
  - frontend/app/page.tsx
  estimate: 1d
- id: P1-T014
  title: Stream token deltas to UI
  priority: P1
  status: completed
  description: Enable token streaming in the backend and render deltas in the chat
    UI as they arrive.
  files:
  - src/enhanced_fda_explorer/agent/fda_agent.py
  - src/enhanced_fda_explorer/api_endpoints.py
  - frontend/lib/api.ts
  - frontend/app/page.tsx
  estimate: 2d
- id: P1-T015
  title: Add streaming cursor indicator
  priority: P1
  status: completed
  description: Show a typing cursor while the assistant is streaming token deltas.
  files:
  - frontend/app/page.tsx
  estimate: 1d
- id: P1-T016
  title: Collapsible thinking panel and tool progress
  priority: P1
  status: completed
  description: Allow collapsing the thinking panel after completion and show a subtle
    tool progress bar.
  files:
  - frontend/app/page.tsx
  estimate: 1d
